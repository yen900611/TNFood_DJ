{% extends 'food/base.html' %}

{% block title %} 台南不需要米其林 {% endblock %}
{% block custom_style %}
  <style>

      .template-sidebar {
          min-height: 600px;
          background-color: #FFFFFF;
          border: #AE3338 5px solid;
      }
  </style>
{% endblock %}
{% block main %}

  <div class="container-fluid border-bottom">
    <div class="row ">
      <div class="col-3 border-right template-sidebar m-1">
        {% include 'food/form_filter.html' with tags=tags %}
      </div>
      <div class="col-8">
        <div class="container-fluid">
          <div class="row " id="gallery">
{#            {% for store in store_list %}#}
              {# 使用模板語言 嵌入URL #}
{#              <a href="{% url 'food_introduction' place_id=store.id %}">#}
{##}
{#                <div class="col-4 grid-item p-0 m-1">#}
{#                  <div class="grid-item-img">#}
{#                    <img class="p-1" style="max-width:280px;max-height: 200px" src="{{ store.get_sample_by_order.url }}"#}
{#                         alt="">#}
{#                  </div>#}
{#                  <label for="">{{ store.name }}</label>#}
{#                </div>#}
{#              </a>#}
{##}
{#            {% endfor %}#}
          </div>
        </div>
      </div>
    </div>
  </div>{% endblock %}

{% block custom_script %}
  <script >
    const endpoint = 'http://127.0.0.1:8000/api/places'

    var requestOptions = {
        method: 'GET',
        //   headers: myHeaders,
        redirect: 'follow'
    };

    fetch(endpoint)
        .then(response => response.json())
        .then(result => {
            let gallery_ele = $('#gallery')

            result.forEach(place => {
                gallery_ele.append(
                    `<div class="col-4 grid-item p-0 m-1">
                    <a href="http://127.0.0.1:8000/food/${place.id}">

                        <div class="grid-item-img">
                            <img class="p-1" style="max-width:280px;max-height: 200px"
                                src="http://127.0.0.1:8000${place.photo_url}" alt="">
                        </div>
                        <label for="">${place.name}</label>
                    </a>
                </div>`
                )

            });
            console.table(result)

        })

  </script>
{% endblock %}